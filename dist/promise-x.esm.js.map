{"version":3,"sources":["../src/promise-x.js"],"names":[],"mappings":"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","file":"promise-x.esm.js","sourcesContent":["import isPrimitive from 'is-primitive';\nimport isFunction from 'is-function-x';\nimport isNil from 'is-nil-x';\nimport toObject from 'to-object-x';\nimport isArguments from 'is-arguments';\nimport bind from 'bind-x';\nimport hasSymbolSupport from 'has-symbol-support-x';\nimport toBoolean from 'to-boolean-x';\nimport create from 'object-create-x';\nimport toLength from 'to-length-x';\nimport defineProperties, {defineProperty} from 'object-define-properties-x';\nimport forEach from 'array-for-each-x';\nimport objectKeys from 'object-keys-x';\nimport assertIsFunction from 'assert-is-function-x';\nimport assertIsObject from 'assert-is-object-x';\nimport attempt from 'attempt-x';\n\n/* eslint-disable-next-line lodash/prefer-noop */\nconst noop = function noop() {};\n\nconst identity = function identity(x) {\n  return x;\n};\n\nconst thrower = function thrower(e) {\n  throw e;\n};\n\nconst NativePromise = typeof Promise === 'undefined' || isPrimitive(Promise) ? null : Promise;\nconst hasWindow = typeof window !== 'undefined' && isPrimitive(window) === false;\n/* eslint-disable-next-line compat/compat */\nconst postMessage = hasWindow && isFunction(window.postMessage) ? window.postMessage : null;\nconst addEventListener = hasWindow && isFunction(window.addEventListener) ? window.addEventListener : null;\nconst nativeSetTimeout = typeof setTimeout === 'undefined' || isPrimitive(setTimeout) ? null : setTimeout;\nconst nativeSetImmediate = typeof setImmediate !== 'undefined' && isFunction(setImmediate) ? setImmediate : null;\nconst {push, shift} = [];\n/* eslint-disable-next-line no-void */\nconst UNDEFINED = void 0;\nconst PRIVATE_PROMISE = '[[promise]]';\n\nconst $apply = bind(Function.call, Function.apply);\nconst $call = bind(Function.call, Function.call);\n\n/* eslint-disable-next-line compat/compat */\nconst symbolSpecies = (hasSymbolSupport && Symbol.species) || '@@species';\nconst ES6_SHIM_ITERATOR = '_es6-shim iterator_';\nconst AT_AT_ITERATOR = '@@iterator';\n/* eslint-disable-next-line compat/compat */\nconst hasRealSymbolIterator = hasSymbolSupport && typeof Symbol.iterator === 'symbol';\n/* eslint-disable-next-line compat/compat */\nconst hasFakeSymbolIterator = typeof Symbol === 'object' && typeof Symbol.iterator === 'string';\nconst hasSymbolIterator = hasRealSymbolIterator || hasFakeSymbolIterator;\n\nconst getOtherSymbolIterator = function getOtherSymbolIterator(iterable) {\n  if (iterable[ES6_SHIM_ITERATOR]) {\n    return ES6_SHIM_ITERATOR;\n  }\n\n  if (iterable[AT_AT_ITERATOR]) {\n    return AT_AT_ITERATOR;\n  }\n\n  return null;\n};\n\nconst getSymIt = function getSymIt() {\n  if (hasSymbolIterator) {\n    /* eslint-disable-next-line compat/compat */\n    return Symbol.iterator;\n  }\n\n  const result = getOtherSymbolIterator([]);\n\n  if (typeof result === 'string' && isFunction([][result])) {\n    return result;\n  }\n\n  return AT_AT_ITERATOR;\n};\n\nconst call = function call(F, V) {\n  /* eslint-disable-next-line prefer-rest-params */\n  return $apply(assertIsFunction(F), V, arguments.length > 2 ? arguments[2] : []);\n};\n\nconst getMethod = function getMethod(o, p) {\n  const func = toObject(o)[p];\n\n  return isNil(func) ? UNDEFINED : assertIsFunction(func);\n};\n\nconst $iterator$ = getSymIt();\n\nconst iteratorComplete = function iteratorComplete(iterResult) {\n  return toBoolean(iterResult.done);\n};\n\nconst assertIteratorsReturn = function assertIteratorsReturn(innerResult) {\n  if (isPrimitive(innerResult)) {\n    throw new TypeError(\"Iterator's return method returned a non-object.\");\n  }\n\n  return innerResult;\n};\n\nconst iteratorClose = function iteratorClose(iterator, completionIsThrow) {\n  const returnMethod = getMethod(iterator, 'return');\n\n  if (typeof returnMethod === 'undefined' || completionIsThrow) {\n    return;\n  }\n\n  const attemptResult = attempt(call, returnMethod, iterator);\n  const innerException = attemptResult.threw ? attemptResult.value : UNDEFINED;\n\n  if (innerException) {\n    throw innerException;\n  }\n\n  assertIteratorsReturn(attemptResult.threw === false ? attemptResult.value : UNDEFINED);\n};\n\nconst iteratorNext = function iteratorNext(it) {\n  /* eslint-disable-next-line prefer-rest-params */\n  const result = arguments.length > 1 ? it.next(arguments[1]) : it.next();\n\n  if (isPrimitive(result)) {\n    throw new TypeError('bad iterator');\n  }\n\n  return result;\n};\n\nconst iteratorStep = function iteratorStep(it) {\n  const result = iteratorNext(it);\n\n  return iteratorComplete(result) ? false : result;\n};\n\n// Given an argument x, it will return an IteratorResult object,\n// with value set to x and done to false.\n// Given no arguments, it will return an iterator completion object.\nconst iteratorResult = function iteratorResult(x) {\n  return {value: x, done: arguments.length === 0};\n};\n\n// Our ArrayIterator is private; see\n// https://github.com/paulmillr/es6-shim/issues/252\nconst ArrayIterator = function ArrayIterator(array, kind) {\n  this.i = 0;\n  this.array = array;\n  this.kind = kind;\n};\n\nconst getArrayIteratorValue = function getArrayIteratorValue(args) {\n  const [kind, array, i] = args;\n\n  if (kind === 'key') {\n    return i;\n  }\n\n  if (kind === 'value') {\n    return array[i];\n  }\n\n  if (kind === 'entry') {\n    return [i, array[i]];\n  }\n\n  return UNDEFINED;\n};\n\nconst assertIsArrayIterator = function assertIsArrayIterator(context) {\n  if (toBoolean(context instanceof ArrayIterator) === false) {\n    throw new TypeError('Not an ArrayIterator');\n  }\n\n  return context;\n};\n\ndefineProperty(ArrayIterator.prototype, 'next', {\n  configurable: true,\n  value: function next() {\n    const {array} = assertIsArrayIterator(this);\n\n    if (typeof array !== 'undefined') {\n      const len = toLength(array.length);\n\n      if (this.i < len) {\n        const retval = getArrayIteratorValue([this.kind, array, this.i]);\n\n        this.i += 1;\n\n        return iteratorResult(retval);\n      }\n    }\n\n    this.array = UNDEFINED;\n\n    return iteratorResult();\n  },\n});\n\n// addIterator(ArrayIterator.prototype);\n\nconst getIterator = function getIterator(o) {\n  if (isArguments(o)) {\n    // special case support for `arguments`\n    return new ArrayIterator(o, 'value');\n  }\n\n  const itFn = getMethod(o, $iterator$);\n\n  if (isFunction(itFn) === false) {\n    // Better diagnostics if itFn is null or undefined\n    throw new TypeError('value is not an iterable');\n  }\n\n  const it = call(itFn, o);\n\n  if (isPrimitive(it)) {\n    throw new TypeError('bad iterator');\n  }\n\n  return it;\n};\n\nconst assertRequiresNew = function assertRequiresNew(o, defaultNewTarget) {\n  if (isPrimitive(o)) {\n    throw new TypeError(`Constructor requires \"new\": ${defaultNewTarget.name}`);\n  }\n};\n\nconst emulateES6construct = function emulateES6construct(args) {\n  const [o, defaultNewTarget, defaultProto, slots] = args;\n  // This is an es5 approximation to es6 construct semantics.  in es6,\n  // 'new Foo' invokes Foo.[[Construct]] which (for almost all objects)\n  // just sets the internal variable NewTarget (in es6 syntax `new.target`)\n  // to Foo and then returns Foo().\n\n  // Many ES6 object then have constructors of the form:\n  // 1. If NewTarget is undefined, throw a TypeError exception\n  // 2. Let xxx by OrdinaryCreateFromConstructor(NewTarget, yyy, zzz)\n\n  // So we're going to emulate those first two steps.\n  assertRequiresNew(o, defaultNewTarget);\n\n  const proto = isPrimitive(defaultNewTarget.prototype) ? defaultProto : defaultNewTarget.prototype;\n  const obj = create(proto);\n  forEach(objectKeys(slots), function iteratee(key) {\n    defineProperty(obj, key, {\n      configurable: true,\n      value: slots[key],\n      writable: true,\n    });\n  });\n\n  return obj;\n};\n\nconst assertBadConstructor = function assertBadConstructor(C) {\n  if (isPrimitive(C)) {\n    throw new TypeError('Bad constructor');\n  }\n\n  return C;\n};\n\nconst assertBadSpecies = function assertBadSpecies(S) {\n  if (isFunction(S) === false) {\n    throw new TypeError('Bad @@species');\n  }\n\n  return S;\n};\n\nconst speciesConstructor = function speciesConstructor(O, defaultConstructor) {\n  const C = O.constructor;\n\n  if (typeof C === 'undefined') {\n    return defaultConstructor;\n  }\n\n  const S = assertBadConstructor(C)[symbolSpecies];\n\n  if (isNil(S)) {\n    return defaultConstructor;\n  }\n\n  return assertBadSpecies(S);\n};\n\nconst isPromise = function isPromise(promise) {\n  if (isPrimitive(promise)) {\n    return false;\n  }\n\n  return typeof promise[PRIVATE_PROMISE] !== 'undefined';\n};\n\nconst createSetZeroTimeout = function createSetZeroTimeout(timeouts, messageName) {\n  return function setZeroTimeout(fn) {\n    push.call(timeouts, fn);\n    postMessage(messageName, '*');\n  };\n};\n\nconst MESSAGE_NAME = 'zero-timeout-message';\nconst makeZeroTimeoutFn = function makeZeroTimeoutFn() {\n  // from http://dbaron.org/log/20100309-faster-timeouts\n  const timeouts = [];\n\n  const handleMessage = function handleMessage(event) {\n    if (event.source === window && event.data === MESSAGE_NAME) {\n      event.stopPropagation();\n\n      if (timeouts.length === 0) {\n        return;\n      }\n\n      shift.call(timeouts)();\n    }\n  };\n\n  addEventListener('message', handleMessage, true);\n\n  return createSetZeroTimeout(timeouts, MESSAGE_NAME);\n};\n\n// find an appropriate setImmediate-alike\nconst makeZeroTimeout = postMessage ? makeZeroTimeoutFn : UNDEFINED;\n\nconst makePromiseAsap = function makePromiseAsap() {\n  // An efficient task-scheduler based on a pre-existing Promise\n  // implementation, which we can use even if we override the\n  // global Promise below (in order to workaround bugs)\n  // https://github.com/Raynos/observ-hash/issues/2#issuecomment-35857671\n  const pr = NativePromise && NativePromise.resolve && NativePromise.resolve();\n\n  if (pr) {\n    return function then(task) {\n      return pr.then(task);\n    };\n  }\n\n  return UNDEFINED;\n};\n\nconst nextTick = typeof process === 'object' && isFunction(process.nextTick) ? process.nextTick : null;\n\nconst getMakeZeroTimeout = function getMakeZeroTimeout() {\n  if (makeZeroTimeout) {\n    return makeZeroTimeout();\n  }\n\n  // fallback\n  return function enqueue(task) {\n    nativeSetTimeout(task, 0);\n  };\n};\n\nconst getEnqueue = function getEnqueue() {\n  if (nativeSetImmediate) {\n    return nativeSetImmediate;\n  }\n\n  if (nextTick) {\n    return nextTick;\n  }\n\n  return makePromiseAsap() || getMakeZeroTimeout();\n};\n\nconst assertBadPromiseCtr = function assertBadPromiseCtr(C) {\n  if (isFunction(C) === false) {\n    throw new TypeError('Bad promise constructor');\n  }\n\n  return C;\n};\n\nconst assertBadPromiseImplementation = function assertBadPromiseImplementation(capability) {\n  if (capability.resolve !== UNDEFINED || capability.reject !== UNDEFINED) {\n    throw new TypeError('Bad Promise implementation!');\n  }\n\n  return capability;\n};\n\nconst assertBadPromiseCtr2 = function assertBadPromiseCtr2(capability) {\n  if (isFunction(capability.resolve) === false || isFunction(capability.reject) === false) {\n    throw new TypeError('Bad promise constructor');\n  }\n\n  return capability;\n};\n\n// Promises\n// Simplest possible implementation; use a 3rd-party library if you\n// want the best possible speed and/or long stack traces.\nexport const implementation = function implementation() {\n  // some environments don't have nativeSetTimeout - no way to shim here.\n  if (nativeSetTimeout === null) {\n    return UNDEFINED;\n  }\n\n  // \"PromiseCapability\" in the spec is what most promise implementations call a \"deferred\".\n  const PromiseCapability = function PromiseCapability(C) {\n    assertBadPromiseCtr(C);\n    const capability = this;\n    const resolver = function resolver(resolve, reject) {\n      assertBadPromiseImplementation(capability);\n      capability.resolve = resolve;\n      capability.reject = reject;\n    };\n\n    // Initialize fields to inform optimizers about the object shape.\n    capability.resolve = UNDEFINED;\n    capability.reject = UNDEFINED;\n    capability.promise = new C(resolver);\n    assertBadPromiseCtr2(capability);\n  };\n\n  const enqueue = getEnqueue();\n\n  // Constants for Promise implementation\n  const PROMISE_PENDING = 0;\n  const PROMISE_FULFILLED = 1;\n  const PROMISE_REJECTED = 2;\n  // We store fulfill/reject handlers and capabilities in a single array.\n  const PROMISE_FULFILL_OFFSET = 0;\n  const PROMISE_REJECT_OFFSET = 1;\n  const PROMISE_CAPABILITY_OFFSET = 2;\n  // This is used in an optimization for chaining promises via then.\n  let PROMISE_FAKE_CAPABILITY = {};\n\n  const promiseReactionJob = function promiseReactionJob(args) {\n    const [handler, promiseCapability, argument] = args;\n\n    if (promiseCapability === PROMISE_FAKE_CAPABILITY) {\n      // Fast case, when we don't actually need to chain through to a (real) promiseCapability.\n      return handler(argument);\n    }\n\n    const attemptResult = attempt(handler, argument);\n    const f = attemptResult.threw ? promiseCapability.reject : promiseCapability.resolve;\n\n    return f(attemptResult.value);\n  };\n\n  const enqueuePromiseReactionJob = function enqueuePromiseReactionJob(args) {\n    const [handler, capability, argument] = args;\n    enqueue(function enqueuee() {\n      promiseReactionJob([handler, capability, argument]);\n    });\n  };\n\n  const undefinePromise = function undefinePromise(promise, idx) {\n    promise[idx + PROMISE_FULFILL_OFFSET] = UNDEFINED;\n    promise[idx + PROMISE_REJECT_OFFSET] = UNDEFINED;\n    promise[idx + PROMISE_CAPABILITY_OFFSET] = UNDEFINED;\n  };\n\n  const enqueueAndDefineFulfill = function enqueueAndDefineFulfill(args) {\n    const [length, privatePromise, value, promise] = args;\n\n    for (let i = 1, idx = 0; i < length; i += 1, idx += 3) {\n      enqueuePromiseReactionJob([\n        privatePromise[idx + PROMISE_FULFILL_OFFSET],\n        privatePromise[idx + PROMISE_CAPABILITY_OFFSET],\n        value,\n      ]);\n\n      undefinePromise(promise, idx);\n    }\n  };\n\n  const enqueueAndDefineReject = function enqueueAndDefineReject(args) {\n    const [length, privatePromise, reason, promise] = args;\n\n    for (let i = 1, idx = 0; i < length; i += 1, idx += 3) {\n      enqueuePromiseReactionJob([\n        privatePromise[idx + PROMISE_REJECT_OFFSET],\n        privatePromise[idx + PROMISE_CAPABILITY_OFFSET],\n        reason,\n      ]);\n\n      undefinePromise(promise, idx);\n    }\n  };\n\n  const undefineProps = function undefineProps(privatePromise) {\n    privatePromise.fulfillReactionHandler0 = UNDEFINED;\n    privatePromise.rejectReactions0 = UNDEFINED;\n    privatePromise.reactionCapability0 = UNDEFINED;\n  };\n\n  const defineResultAndState = function defineResultAndState(args) {\n    const [privatePromise, value, state] = args;\n\n    privatePromise.result = value;\n    privatePromise.state = state;\n    privatePromise.reactionLength = 0;\n  };\n\n  const fulfillPromise = function fulfillPromise(promise, value) {\n    const privatePromise = promise[PRIVATE_PROMISE];\n    const length = privatePromise.reactionLength;\n\n    if (length > 0) {\n      enqueuePromiseReactionJob([privatePromise.fulfillReactionHandler0, privatePromise.reactionCapability0, value]);\n      undefineProps(privatePromise);\n\n      if (length > 1) {\n        enqueueAndDefineFulfill([length, privatePromise, value, promise]);\n      }\n    }\n\n    defineResultAndState([privatePromise, value, PROMISE_FULFILLED]);\n  };\n\n  const rejectPromise = function rejectPromise(promise, reason) {\n    const privatePromise = promise[PRIVATE_PROMISE];\n    const length = privatePromise.reactionLength;\n\n    if (length > 0) {\n      enqueuePromiseReactionJob([privatePromise.rejectReactionHandler0, privatePromise.reactionCapability0, reason]);\n      undefineProps(privatePromise);\n\n      if (length > 1) {\n        enqueueAndDefineReject([length, privatePromise, reason, promise]);\n      }\n    }\n\n    defineResultAndState([privatePromise, reason, PROMISE_REJECTED]);\n  };\n\n  let promiseResolveThenableJob;\n\n  const createResolvingFunctions = function createResolvingFunctions(promise) {\n    let alreadyResolved = false;\n    const resolve = function resolve(resolution) {\n      if (alreadyResolved) {\n        return UNDEFINED;\n      }\n\n      alreadyResolved = true;\n\n      if (resolution === promise) {\n        return rejectPromise(promise, new TypeError('Self resolution'));\n      }\n\n      if (isPrimitive(resolution)) {\n        return fulfillPromise(promise, resolution);\n      }\n\n      const attemptResult = attempt(function attemptee() {\n        return resolution.then;\n      });\n\n      if (attemptResult.threw) {\n        return rejectPromise(promise, attemptResult.value);\n      }\n\n      const then = attemptResult.value;\n\n      if (isFunction(then) === false) {\n        return fulfillPromise(promise, resolution);\n      }\n\n      enqueue(function enqueuee() {\n        promiseResolveThenableJob([promise, resolution, then]);\n      });\n\n      return UNDEFINED;\n    };\n\n    const reject = function reject(reason) {\n      if (alreadyResolved) {\n        return UNDEFINED;\n      }\n\n      alreadyResolved = true;\n\n      return rejectPromise(promise, reason);\n    };\n\n    return {resolve, reject};\n  };\n\n  let Promise$prototype$then;\n\n  const optimizedThen = function optimizedThen(args) {\n    const [then, thenable, resolve, reject] = args;\n\n    // Optimization: since we discard the result, we can pass our\n    // own then implementation a special hint to let it know it\n    // doesn't have to create it.  (The PROMISE_FAKE_CAPABILITY\n    // object is local to this implementation and unforgeable outside.)\n    if (then === Promise$prototype$then) {\n      $call(then, thenable, resolve, reject, PROMISE_FAKE_CAPABILITY);\n    } else {\n      $call(then, thenable, resolve, reject);\n    }\n  };\n\n  promiseResolveThenableJob = function $promiseResolveThenableJob(args) {\n    const [promise, thenable, then] = args;\n    const {resolve, reject} = createResolvingFunctions(promise);\n    const attemptResults = attempt(optimizedThen, [then, thenable, resolve, reject]);\n\n    if (attemptResults.threw) {\n      reject(attemptResults.value);\n    }\n  };\n\n  const assertPromiseRequiresNew = function assertPromiseRequiresNew(context, Ctr) {\n    if (toBoolean(context instanceof Ctr) === false) {\n      throw new TypeError('Constructor Promise requires \"new\"');\n    }\n\n    return context;\n  };\n\n  const assertBadConstruction = function assertBadConstruction(context) {\n    if (context && context[PRIVATE_PROMISE]) {\n      throw new TypeError('Bad construction');\n    }\n\n    return context;\n  };\n\n  // see https://bugs.ecmascript.org/show_bug.cgi?id=2482\n  const assertValidResolver = function assertValidResolver(resolver) {\n    if (isFunction(resolver) === false) {\n      throw new TypeError('not a valid resolver');\n    }\n\n    return resolver;\n  };\n\n  const getSlotsObject = function getSlotsObject() {\n    return {\n      [PRIVATE_PROMISE]: {\n        result: UNDEFINED,\n        state: PROMISE_PENDING,\n        // The first member of the \"reactions\" array is inlined here,\n        // since most promises only have one reaction.\n        // We've also exploded the 'reaction' object to inline the\n        // \"handler\" and \"capability\" fields, since both fulfill and\n        // reject reactions share the same capability.\n        reactionLength: 0,\n        fulfillReactionHandler0: UNDEFINED,\n        rejectReactionHandler0: UNDEFINED,\n        reactionCapability0: UNDEFINED,\n      },\n    };\n  };\n\n  let Promise$prototype;\n  const $Promise = function Promise(resolver) {\n    assertPromiseRequiresNew(this, $Promise);\n    assertBadConstruction(this);\n    assertValidResolver(resolver);\n\n    const promise = emulateES6construct([this, $Promise, Promise$prototype, getSlotsObject()]);\n    const resolvingFunctions = createResolvingFunctions(promise);\n    const {reject} = resolvingFunctions;\n    const attemptResult = attempt(function attemptee() {\n      resolver(resolvingFunctions.resolve, reject);\n    });\n\n    if (attemptResult.threw) {\n      reject(attemptResult.value);\n    }\n\n    return promise;\n  };\n\n  Promise$prototype = $Promise.prototype;\n\n  const promiseAllResolver = function promiseAllResolver(args) {\n    const [index, values, capability, remaining] = args;\n    let alreadyCalled = false;\n\n    return function allResolver(x) {\n      if (alreadyCalled) {\n        return;\n      }\n\n      alreadyCalled = true;\n      values[index] = x;\n      remaining.count -= 1;\n\n      if (remaining.count === 0) {\n        capability.resolve(values); // call w/ this===undefined\n      }\n    };\n  };\n\n  const performPromiseAll = function performPromiseAll(iteratorRecord, C, resultCapability) {\n    const it = iteratorRecord.iterator;\n    const values = [];\n    const remaining = {count: 1};\n    let next;\n    let nextValue;\n    let index = 0;\n    while (true) {\n      try {\n        next = iteratorStep(it);\n\n        if (next === false) {\n          iteratorRecord.done = true;\n          break;\n        }\n\n        nextValue = next.value;\n      } catch (e) {\n        iteratorRecord.done = true;\n        throw e;\n      }\n\n      values[index] = UNDEFINED;\n      const nextPromise = C.resolve(nextValue);\n      const resolveElement = promiseAllResolver([index, values, resultCapability, remaining]);\n      remaining.count += 1;\n      optimizedThen([nextPromise.then, nextPromise, resolveElement, resultCapability.reject]);\n      index += 1;\n    }\n\n    remaining.count -= 1;\n\n    if (remaining.count === 0) {\n      resultCapability.resolve(values); // call w/ this===undefined\n    }\n\n    return resultCapability.promise;\n  };\n\n  const assertPromiseIsObject = function assertPromiseIsObject(C) {\n    if (isPrimitive(C)) {\n      throw new TypeError('Promise is not object');\n    }\n\n    return C;\n  };\n\n  const assertBadConstructor3 = function assertBadConstructor3(C) {\n    if (isPrimitive(C)) {\n      throw new TypeError('Bad promise constructor');\n    }\n\n    return C;\n  };\n\n  const assertIsPromise = function assertIsPromise(promise) {\n    if (isPromise(promise) === false) {\n      throw new TypeError('not a promise');\n    }\n\n    return promise;\n  };\n\n  const performPromiseRace = function performPromiseRace(iteratorRecord, C, resultCapability) {\n    const it = iteratorRecord.iterator;\n    let next;\n    let nextValue;\n    let nextPromise;\n    while (true) {\n      try {\n        next = iteratorStep(it);\n\n        if (next === false) {\n          // NOTE: If iterable has no items, resulting promise will never\n          // resolve; see:\n          // https://github.com/domenic/promises-unwrapping/issues/75\n          // https://bugs.ecmascript.org/show_bug.cgi?id=2515\n          iteratorRecord.done = true;\n          break;\n        }\n\n        nextValue = next.value;\n      } catch (e) {\n        iteratorRecord.done = true;\n        throw e;\n      }\n\n      nextPromise = C.resolve(nextValue);\n      optimizedThen([nextPromise.then, nextPromise, resultCapability.resolve, resultCapability.reject]);\n    }\n\n    return resultCapability.promise;\n  };\n\n  defineProperties($Promise, {\n    all: {\n      configurable: true,\n      value: function all(iterable) {\n        const C = assertPromiseIsObject(this);\n        const capability = new PromiseCapability(C);\n        let iterator;\n        let iteratorRecord;\n        try {\n          iterator = getIterator(iterable);\n          iteratorRecord = {iterator, done: false};\n\n          return performPromiseAll(iteratorRecord, C, capability);\n        } catch (e) {\n          let exception = e;\n\n          if (iteratorRecord && toBoolean(iteratorRecord.done) === false) {\n            const attemptResult = attempt(iteratorClose, iterator, true);\n\n            if (attemptResult.threw) {\n              exception = attemptResult.value;\n            }\n          }\n\n          capability.reject(exception);\n\n          return capability.promise;\n        }\n      },\n      writable: true,\n    },\n\n    race: {\n      configurable: true,\n      value: function race(iterable) {\n        const C = assertPromiseIsObject(this);\n        const capability = new PromiseCapability(C);\n        let iterator;\n        let iteratorRecord;\n        try {\n          iterator = getIterator(iterable);\n          iteratorRecord = {iterator, done: false};\n\n          return performPromiseRace(iteratorRecord, C, capability);\n        } catch (e) {\n          let exception = e;\n\n          if (iteratorRecord && !iteratorRecord.done) {\n            const attemptResult = attempt(iteratorClose, iterator, true);\n\n            if (attemptResult.threw) {\n              exception = attemptResult.value;\n            }\n          }\n\n          capability.reject(exception);\n\n          return capability.promise;\n        }\n      },\n      writable: true,\n    },\n\n    reject: {\n      configurable: true,\n      value: function reject(reason) {\n        const C = this;\n\n        if (isPrimitive(C)) {\n          throw new TypeError('Bad promise constructor');\n        }\n\n        const capability = new PromiseCapability(C);\n        capability.reject(reason); // call with this===undefined\n\n        return capability.promise;\n      },\n      writable: true,\n    },\n\n    resolve: {\n      configurable: true,\n      value: function resolve(v) {\n        // See https://esdiscuss.org/topic/fixing-promise-resolve for spec\n        const C = assertBadConstructor3(this);\n\n        if (isPromise(v) && v.constructor === C) {\n          return v;\n        }\n\n        const capability = new PromiseCapability(C);\n        capability.resolve(v); // call with this===undefined\n\n        return capability.promise;\n      },\n      writable: true,\n    },\n\n    [symbolSpecies]: {\n      get() {\n        return this;\n      },\n    },\n  });\n\n  const promiseResolve = function PromiseResolve(C, value) {\n    if (isPromise(value) && value.constructor === C) {\n      return value;\n    }\n\n    const promiseCapability = new PromiseCapability(C);\n    promiseCapability.resolve(value);\n\n    return promiseCapability.promise;\n  };\n\n  const createThenFinally = function CreateThenFinally(C, onFinally) {\n    /* eslint-disable-next-line func-names */\n    return function(value) {\n      const result = onFinally();\n\n      /* eslint-disable-next-line func-names */\n      return promiseResolve(C, result).then(function() {\n        return value;\n      });\n    };\n  };\n\n  const createCatchFinally = function CreateCatchFinally(C, onFinally) {\n    /* eslint-disable-next-line func-names */\n    return function(reason) {\n      const result = onFinally();\n\n      /* eslint-disable-next-line func-names */\n      return promiseResolve(C, result).then(function() {\n        throw reason;\n      });\n    };\n  };\n\n  defineProperties(Promise$prototype, {\n    catch: {\n      configurable: true,\n      value: function $catch(onRejected) {\n        return this.then(null, onRejected);\n      },\n      writable: true,\n    },\n\n    finally: {\n      configurable: true,\n      value: function $finally(onFinally) {\n        const promise = assertIsObject(this);\n        const C = assertIsFunction(speciesConstructor(promise, $Promise));\n        const isCallable = isFunction(onFinally);\n        const thenFinally = isCallable ? createThenFinally(C, onFinally) : onFinally;\n        const catchFinally = isCallable ? createCatchFinally(C, onFinally) : onFinally;\n\n        return promise.then(thenFinally, catchFinally);\n      },\n      writable: true,\n    },\n\n    then: {\n      configurable: true,\n      value: function then(onFulfilled, onRejected) {\n        const promise = assertIsPromise(this);\n        const C = speciesConstructor(promise, $Promise);\n\n        /* eslint-disable-next-line prefer-rest-params */\n        const returnValueIsIgnored = arguments.length > 2 && arguments[2] === PROMISE_FAKE_CAPABILITY;\n        const resultCapability = returnValueIsIgnored && C === $Promise ? PROMISE_FAKE_CAPABILITY : new PromiseCapability(C);\n\n        // PerformPromiseThen(promise, onFulfilled, onRejected, resultCapability)\n        // Note that we've split the 'reaction' object into its two\n        // components, \"capabilities\" and \"handler\"\n        // \"capabilities\" is always equal to `resultCapability`\n        const fulfillReactionHandler = isFunction(onFulfilled) ? onFulfilled : identity;\n        const rejectReactionHandler = isFunction(onRejected) ? onRejected : thrower;\n        const privatePromise = promise[PRIVATE_PROMISE];\n\n        if (privatePromise.state === PROMISE_PENDING) {\n          if (privatePromise.reactionLength === 0) {\n            privatePromise.fulfillReactionHandler0 = fulfillReactionHandler;\n            privatePromise.rejectReactionHandler0 = rejectReactionHandler;\n            privatePromise.reactionCapability0 = resultCapability;\n          } else {\n            const idx = 3 * (privatePromise.reactionLength - 1);\n            privatePromise[idx + PROMISE_FULFILL_OFFSET] = fulfillReactionHandler;\n            privatePromise[idx + PROMISE_REJECT_OFFSET] = rejectReactionHandler;\n            privatePromise[idx + PROMISE_CAPABILITY_OFFSET] = resultCapability;\n          }\n\n          privatePromise.reactionLength += 1;\n        } else if (privatePromise.state === PROMISE_FULFILLED) {\n          enqueuePromiseReactionJob([fulfillReactionHandler, resultCapability, privatePromise.result]);\n        } else if (privatePromise.state === PROMISE_REJECTED) {\n          enqueuePromiseReactionJob([rejectReactionHandler, resultCapability, privatePromise.result]);\n        } else {\n          throw new TypeError('unexpected Promise state');\n        }\n\n        return resultCapability.promise;\n      },\n      writable: true,\n    },\n  });\n\n  if (Object.getOwnPropertyDescriptor) {\n    {\n      const descriptor = Object.getOwnPropertyDescriptor(Promise$prototype.finally, 'name');\n\n      if (descriptor && descriptor.configurable) {\n        Object.defineProperty(Promise$prototype.finally, 'name', {configurable: true, value: 'finally'});\n      }\n    }\n\n    {\n      const descriptor = Object.getOwnPropertyDescriptor(Promise$prototype.catch, 'name');\n\n      if (descriptor && descriptor.configurable) {\n        Object.defineProperty(Promise$prototype.catch, 'name', {configurable: true, value: 'catch'});\n      }\n    }\n  }\n\n  // This helps the optimizer by ensuring that methods which take capabilities aren't polymorphic.\n  PROMISE_FAKE_CAPABILITY = new PromiseCapability($Promise);\n  Promise$prototype$then = Promise$prototype.then;\n\n  return $Promise;\n};\n\nconst throwsError = function throwsError(func) {\n  return attempt(func).threw;\n};\n\nconst valueOrFalseIfThrows = function valueOrFalseIfThrows(func) {\n  const res = attempt(func);\n\n  return res.threw ? false : res.value;\n};\n\nconst supportsSubclassing = function supportsSubclassing(C, f) {\n  /* eslint-disable-next-line compat/compat */\n  if (isFunction(Object.setPrototypeOf) === false) {\n    return false; /* skip test on IE < 11 */\n  }\n\n  return valueOrFalseIfThrows(function throwee() {\n    const Sub = function Subclass(arg) {\n      const o = new C(arg);\n      /* eslint-disable-next-line compat/compat */\n      Object.setPrototypeOf(o, Subclass.prototype);\n\n      return o;\n    };\n\n    /* eslint-disable-next-line compat/compat */\n    Object.setPrototypeOf(Sub, C);\n    Sub.prototype = create(C.prototype, {\n      constructor: {value: Sub},\n    });\n\n    return f(Sub);\n  });\n};\n\n// In Chrome 33 (and thereabouts) Promise is defined, but the\n// implementation is buggy in a number of ways.  Let's check subclassing\n// support to see if we have a buggy implementation.\nconst testSupportsSubclassing = function testSupportsSubclassing() {\n  return supportsSubclassing(NativePromise, function executee(S) {\n    return (\n      S.resolve(42).then(function thenee() {\n        return UNDEFINED;\n      }) instanceof S\n    );\n  });\n};\n\nconst testIgnoresNonFunctionThenCallbacks = function testIgnoresNonFunctionThenCallbacks() {\n  return (\n    throwsError(function throwee() {\n      return NativePromise.reject(42)\n        .then(null, 5)\n        .then(null, noop);\n    }) === false\n  );\n};\n\nconst testRequiresObjectContext = function testRequiresObjectContext() {\n  return throwsError(function throwee() {\n    return NativePromise.call(3, noop);\n  });\n};\n\n// Promise.resolve() was errata'ed late in the ES6 process.\n// See: https://bugzilla.mozilla.org/show_bug.cgi?id=1170742\n//      https://code.google.com/p/v8/issues/detail?id=4161\n// It serves as a proxy for a number of other bugs in early Promise\n// implementations.\nconst testPromiseResolve = function testPromiseResolve() {\n  const p = NativePromise.resolve(5);\n  p.constructor = {};\n\n  const p2 = NativePromise.resolve(p);\n  const res = attempt(function attemptee() {\n    /* eslint-disable-next-line promise/catch-or-return */\n    p2.then(null, noop).then(null, noop); // avoid \"uncaught rejection\" warnings in console\n  });\n\n  // v8 native Promises break here https://code.google.com/p/chromium/issues/detail?id=575314\n  if (res.threw) {\n    return false;\n  }\n\n  // This *should* be true!\n  return p !== p2;\n};\n\nconst arePropertyDescriptorsSupported = function arePropertyDescriptorsSupported() {\n  // if Object.defineProperty exists but throws, it's IE 8\n  return (\n    throwsError(function throwee() {\n      /* eslint-disable-next-line lodash/prefer-noop */\n      return defineProperty({}, 'x', {get() {}});\n    }) === false\n  );\n};\n\n// Chrome 46 (probably older too) does not retrieve a thenable's .then synchronously\nconst testThenSynchronicity = function testThenSynchronicity() {\n  if (arePropertyDescriptorsSupported() === false) {\n    return false;\n  }\n\n  let count = 0;\n  const thenable = defineProperty({}, 'then', {\n    get() {\n      count += 1;\n    },\n  });\n\n  NativePromise.resolve(thenable);\n\n  return count === 1;\n};\n\nconst BadResolverPromise = function BadResolverPromise(executor) {\n  const p = new NativePromise(executor);\n\n  /* eslint-disable-next-line func-names,lodash/prefer-noop */\n  executor(3, function() {});\n  this.then = p.then;\n  this.constructor = BadResolverPromise;\n};\n\nBadResolverPromise.prototype = NativePromise.prototype;\nBadResolverPromise.all = NativePromise.all;\n// Chrome Canary 49 (probably older too) has some implementation bugs\nconst testBadResolverPromise = function testBadResolverPromise() {\n  return (\n    valueOrFalseIfThrows(function throwee() {\n      return toBoolean(BadResolverPromise.all([1, 2]));\n    }) === false\n  );\n};\n\nconst testWorkingFinally = function testWorkingFinally() {\n  return (\n    attempt(function attemptee() {\n      /* eslint-disable-next-line promise/catch-or-return,promise/valid-params */\n      new NativePromise(noop).finally();\n    }).threw === false\n  );\n};\n\nconst isWorking =\n  toBoolean(NativePromise) &&\n  testSupportsSubclassing() &&\n  testIgnoresNonFunctionThenCallbacks() &&\n  testRequiresObjectContext() &&\n  testPromiseResolve() &&\n  testThenSynchronicity() &&\n  testBadResolverPromise() &&\n  testWorkingFinally();\n\nexport default isWorking ? NativePromise : implementation();\n"]}